from twython import Twython,TwythonRateLimitError,TwythonError
import time
import ConnectionList as CL
import TwitterUsers as TU
import Database
import datetime
import json
 
class Tweet:
    def __init__(self,id,userId,timestamp,content,hashtags):
        self.id = id
        self.userId = userId
        self.timestamp = timestamp
        self.content = content
        self.hashtags = hashtags

def jsonToTweet(userId,tweet):
    hashtags = []
    for hashtag in (tweet['entities']['hashtags']):
        hashtags.append(hashtag['text'])

    id = tweet['id']
    timestamp = tweet['created_at']
    content = tweet['text']

    return Tweet(id,userId,timestamp,content,hashtags)



def main(userId):
    conn = CL.ConnectionList(filepath="config/access.conf") 

    maxId = None
    userId = 2785262214

    tweets = []


    while True:

        
        try:
            response = conn.connection().get_user_timeline(user_id = userId, include_rts = False, trim_user = True, max_id = maxId)
            
            # response = [{'lang': 'en', 'in_reply_to_screen_name': None, 'entities': {'user_mentions': [], 'hashtags': [], 'urls': [{'url': 'http://t.co/c1rnXT6Xsc', 'expanded_url': 'http://www.economist.com/news/business/21665070-flock-startups-making-cloud-computing-faster-and-more-flexible-most-them-will', 'indices': [104, 126], 'display_url': 'economist.com/news/business/…'}], 'symbols': []}, 'retweet_count': 0, 'possibly_sensitive': False, 'coordinates': None, 'place': None, 'contributors': None, 'text': 'Interesting reflection of the new cloud computing startups like Docker, from an economic point of view. http://t.co/c1rnXT6Xsc', 'in_reply_to_status_id_str': None, 'id': 650359821120745472, 'source': '<a href="http://twitter.com" rel="nofollow">Twitter Web Client</a>', 'truncated': False, 'created_at': 'Sat Oct 03 17:20:39 +0000 2015', 'id_str': '650359821120745472', 'in_reply_to_status_id': None, 'in_reply_to_user_id': None, 'favorite_count': 0, 'is_quote_status': False, 'in_reply_to_user_id_str': None, 'favorited': False, 'retweeted': False, 'user': {'id_str': '2785262214', 'id': 2785262214}, 'geo': None}, {'lang': 'sv', 'in_reply_to_screen_name': 'macaullyjames', 'entities': {'user_mentions': [{'screen_name': 'macaullyjames', 'indices': [0, 14], 'id_str': '2373378192', 'id': 2373378192, 'name': 'Macaully James Muir'}], 'hashtags': [], 'urls': [], 'symbols': []}, 'retweet_count': 0, 'coordinates': None, 'place': None, 'contributors': None, 'text': '@macaullyjames Håller verkligen med! De fåtal API:er som finns inom finanssektorn är ålderdomliga och dyra.', 'in_reply_to_status_id_str': '628589949034622976', 'id': 628823026138763264, 'source': '<a href="http://twitter.com" rel="nofollow">Twitter Web Client</a>', 'truncated': False, 'created_at': 'Wed Aug 05 07:01:07 +0000 2015', 'id_str': '628823026138763264', 'in_reply_to_status_id': 628589949034622976, 'in_reply_to_user_id': 2373378192, 'favorite_count': 0, 'is_quote_status': False, 'in_reply_to_user_id_str': '2373378192', 'favorited': False, 'retweeted': False, 'user': {'id_str': '2785262214', 'id': 2785262214}, 'geo': None}, {'lang': 'sv', 'in_reply_to_screen_name': None, 'entities': {'user_mentions': [], 'hashtags': [{'text': 'Swish', 'indices': [73, 79]}], 'urls': [{'url': 'http://t.co/wxqr0LZYvB', 'expanded_url': 'http://sverigesradio.se/sida/artikel.aspx?programid=83&artikel=6224076', 'indices': [96, 118], 'display_url': 'sverigesradio.se/sida/artikel.a…'}], 'symbols': []}, 'retweet_count': 0, 'possibly_sensitive': False, 'coordinates': None, 'place': None, 'contributors': None, 'text': 'Äntligen lite press på de svenska bankerna att innovera! Tidsfråga innan #Swish är på utdöende? http://t.co/wxqr0LZYvB', 'in_reply_to_status_id_str': None, 'id': 628581093361459200, 'source': '<a href="http://twitter.com" rel="nofollow">Twitter Web Client</a>', 'truncated': False, 'created_at': 'Tue Aug 04 14:59:45 +0000 2015', 'id_str': '628581093361459200', 'in_reply_to_status_id': None, 'in_reply_to_user_id': None, 'favorite_count': 0, 'is_quote_status': False, 'in_reply_to_user_id_str': None, 'favorited': False, 'retweeted': False, 'user': {'id_str': '2785262214', 'id': 2785262214}, 'geo': None}, {'lang': 'sv', 'in_reply_to_screen_name': None, 'entities': {'user_mentions': [], 'hashtags': [], 'urls': [{'url': 'https://t.co/sSqgEiE7RB', 'expanded_url': 'https://www.iis.se/docs/Unga_kvinnor_och_IT.pdf', 'indices': [57, 80], 'display_url': 'iis.se/docs/Unga_kvin…'}], 'symbols': []}, 'retweet_count': 0, 'possibly_sensitive': False, 'coordinates': None, 'place': None, 'contributors': None, 'text': 'Några svar på hur jämställdheten kan öka i IT-branschen.\nhttps://t.co/sSqgEiE7RB', 'in_reply_to_status_id_str': None, 'id': 619218094494511104, 'source': '<a href="http://twitter.com" rel="nofollow">Twitter Web Client</a>', 'truncated': False, 'created_at': 'Thu Jul 09 18:54:32 +0000 2015', 'id_str': '619218094494511104', 'in_reply_to_status_id': None, 'in_reply_to_user_id': None, 'favorite_count': 0, 'is_quote_status': False, 'in_reply_to_user_id_str': None, 'favorited': False, 'retweeted': False, 'user': {'id_str': '2785262214', 'id': 2785262214}, 'geo': None}, {'lang': 'no', 'in_reply_to_screen_name': None, 'entities': {'user_mentions': [], 'media': [{'url': 'http://t.co/92HyBgVetZ', 'media_url_https': 'https://pbs.twimg.com/media/CJFME1nWgAA1psd.jpg', 'media_url': 'http://pbs.twimg.com/media/CJFME1nWgAA1psd.jpg', 'indices': [115, 137], 'id': 617358269921787904, 'display_url': 'pic.twitter.com/92HyBgVetZ', 'type': 'photo', 'id_str': '617358269921787904', 'expanded_url': 'http://twitter.com/HadarGreinsmark/status/617358276733337600/photo/1', 'sizes': {'thumb': {'h': 150, 'resize': 'crop', 'w': 150}, 'medium': {'h': 450, 'resize': 'fit', 'w': 600}, 'small': {'h': 255, 'resize': 'fit', 'w': 340}, 'large': {'h': 768, 'resize': 'fit', 'w': 1024}}}], 'hashtags': [], 'urls': [], 'symbols': []}, 'retweet_count': 0, 'possibly_sensitive': False, 'coordinates': None, 'place': None, 'contributors': None, 'extended_entities': {'media': [{'url': 'http://t.co/92HyBgVetZ', 'media_url_https': 'https://pbs.twimg.com/media/CJFME1nWgAA1psd.jpg', 'media_url': 'http://pbs.twimg.com/media/CJFME1nWgAA1psd.jpg', 'indices': [115, 137], 'id': 617358269921787904, 'display_url': 'pic.twitter.com/92HyBgVetZ', 'type': 'photo', 'id_str': '617358269921787904', 'expanded_url': 'http://twitter.com/HadarGreinsmark/status/617358276733337600/photo/1', 'sizes': {'thumb': {'h': 150, 'resize': 'crop', 'w': 150}, 'medium': {'h': 450, 'resize': 'fit', 'w': 600}, 'small': {'h': 255, 'resize': 'fit', 'w': 340}, 'large': {'h': 768, 'resize': 'fit', 'w': 1024}}}]}, 'text': 'Intressant seminarium med IT-minister Mehmet Kaplan i Almedalen. Skilda meningar råder om IT-politikens potential. http://t.co/92HyBgVetZ', 'in_reply_to_status_id_str': None, 'id': 617358276733337600, 'source': '<a href="http://twitter.com/download/android" rel="nofollow">Twitter for Android</a>', 'truncated': False, 'created_at': 'Sat Jul 04 15:44:17 +0000 2015', 'id_str': '617358276733337600', 'in_reply_to_status_id': None, 'in_reply_to_user_id': None, 'favorite_count': 0, 'is_quote_status': False, 'in_reply_to_user_id_str': None, 'favorited': False, 'retweeted': False, 'user': {'id_str': '2785262214', 'id': 2785262214}, 'geo': None}, {'lang': 'in', 'in_reply_to_screen_name': 'filip_jansson', 'entities': {'user_mentions': [{'screen_name': 'filip_jansson', 'indices': [0, 14], 'id_str': '2303269319', 'id': 2303269319, 'name': 'Filip Jansson'}], 'hashtags': [{'text': 'komm14', 'indices': [25, 32]}], 'urls': [], 'symbols': []}, 'retweet_count': 0, 'coordinates': None, 'place': None, 'contributors': None, 'text': '@filip_jansson 7 januari #komm14', 'in_reply_to_status_id_str': '551661538265026561', 'id': 551759527650279424, 'source': '<a href="http://twitter.com" rel="nofollow">Twitter Web Client</a>', 'truncated': False, 'created_at': 'Sun Jan 04 15:18:17 +0000 2015', 'id_str': '551759527650279424', 'in_reply_to_status_id': 551661538265026561, 'in_reply_to_user_id': 2303269319, 'favorite_count': 0, 'is_quote_status': False, 'in_reply_to_user_id_str': '2303269319', 'favorited': False, 'retweeted': False, 'user': {'id_str': '2785262214', 'id': 2785262214}, 'geo': None}, {'lang': 'no', 'in_reply_to_screen_name': 'HadarGreinsmark', 'entities': {'user_mentions': [{'screen_name': 'KarlqvistWalter', 'indices': [0, 16], 'id_str': '2759132332', 'id': 2759132332, 'name': 'Walter Karlqvist'}], 'hashtags': [{'text': 'komm14', 'indices': [36, 43]}], 'urls': [], 'symbols': []}, 'retweet_count': 0, 'coordinates': None, 'place': None, 'contributors': None, 'text': '@KarlqvistWalter P.S. finns som PDF #komm14', 'in_reply_to_status_id_str': '550617978291879936', 'id': 550618811523932161, 'source': '<a href="http://twitter.com/download/android" rel="nofollow">Twitter for Android</a>', 'truncated': False, 'created_at': 'Thu Jan 01 11:45:29 +0000 2015', 'id_str': '550618811523932161', 'in_reply_to_status_id': 550617978291879936, 'in_reply_to_user_id': 2785262214, 'favorite_count': 0, 'is_quote_status': False, 'in_reply_to_user_id_str': '2785262214', 'favorited': False, 'retweeted': False, 'user': {'id_str': '2785262214', 'id': 2785262214}, 'geo': None}, {'lang': 'sv', 'in_reply_to_screen_name': 'KarlqvistWalter', 'entities': {'user_mentions': [{'screen_name': 'KarlqvistWalter', 'indices': [0, 16], 'id_str': '2759132332', 'id': 2759132332, 'name': 'Walter Karlqvist'}], 'hashtags': [{'text': 'komm14', 'indices': [84, 91]}], 'urls': [], 'symbols': []}, 'retweet_count': 0, 'coordinates': None, 'place': None, 'contributors': None, 'text': '@KarlqvistWalter Boken är ca 500 sid, men tror inte vi ska läsa från pärm för pärm. #komm14', 'in_reply_to_status_id_str': '549940466591232000', 'id': 550617978291879936, 'source': '<a href="http://twitter.com/download/android" rel="nofollow">Twitter for Android</a>', 'truncated': False, 'created_at': 'Thu Jan 01 11:42:10 +0000 2015', 'id_str': '550617978291879936', 'in_reply_to_status_id': 549940466591232000, 'in_reply_to_user_id': 2759132332, 'favorite_count': 0, 'is_quote_status': False, 'in_reply_to_user_id_str': '2759132332', 'favorited': False, 'retweeted': False, 'user': {'id_str': '2785262214', 'id': 2785262214}, 'geo': None}, {'lang': 'sv', 'in_reply_to_screen_name': None, 'entities': {'user_mentions': [], 'hashtags': [{'text': 'komm14', 'indices': [98, 105]}], 'urls': [], 'symbols': []}, 'retweet_count': 0, 'coordinates': None, 'place': None, 'contributors': None, 'text': 'Har börjat kolla på kurslitteraturen till Människa-datorinteraktion. Perfekt att vi värmt upp med #komm14', 'in_reply_to_status_id_str': None, 'id': 549663665444900864, 'source': '<a href="http://twitter.com" rel="nofollow">Twitter Web Client</a>', 'truncated': False, 'created_at': 'Mon Dec 29 20:30:04 +0000 2014', 'id_str': '549663665444900864', 'in_reply_to_status_id': None, 'in_reply_to_user_id': None, 'favorite_count': 0, 'is_quote_status': False, 'in_reply_to_user_id_str': None, 'favorited': False, 'retweeted': False, 'user': {'id_str': '2785262214', 'id': 2785262214}, 'geo': None}, {'lang': 'sv', 'in_reply_to_screen_name': None, 'entities': {'user_mentions': [], 'hashtags': [{'text': 'komm14', 'indices': [66, 73]}], 'urls': [], 'symbols': []}, 'retweet_count': 0, 'coordinates': None, 'place': None, 'contributors': None, 'text': 'Nu har jag gett er lärare ordentligt med feedback på kursenkäten! #komm14', 'in_reply_to_status_id_str': None, 'id': 545892038907273216, 'source': '<a href="http://twitter.com/download/android" rel="nofollow">Twitter for Android</a>', 'truncated': False, 'created_at': 'Fri Dec 19 10:42:58 +0000 2014', 'id_str': '545892038907273216', 'in_reply_to_status_id': None, 'in_reply_to_user_id': None, 'favorite_count': 0, 'is_quote_status': False, 'in_reply_to_user_id_str': None, 'favorited': False, 'retweeted': False, 'user': {'id_str': '2785262214', 'id': 2785262214}, 'geo': None}, {'lang': 'sv', 'in_reply_to_screen_name': 'Jnaaass', 'entities': {'user_mentions': [{'screen_name': 'Jnaaass', 'indices': [0, 8], 'id_str': '320133757', 'id': 320133757, 'name': 'Jonas Johansson'}], 'hashtags': [{'text': 'komm14', 'indices': [25, 32]}], 'urls': [], 'symbols': []}, 'retweet_count': 0, 'coordinates': None, 'place': None, 'contributors': None, 'text': '@Jnaaass Ja, det gör vi. #komm14', 'in_reply_to_status_id_str': '543789063317499904', 'id': 544220352092844033, 'source': '<a href="http://twitter.com" rel="nofollow">Twitter Web Client</a>', 'truncated': False, 'created_at': 'Sun Dec 14 20:00:17 +0000 2014', 'id_str': '544220352092844033', 'in_reply_to_status_id': 543789063317499904, 'in_reply_to_user_id': 320133757, 'favorite_count': 0, 'is_quote_status': False, 'in_reply_to_user_id_str': '320133757', 'favorited': False, 'retweeted': False, 'user': {'id_str': '2785262214', 'id': 2785262214}, 'geo': None}, {'lang': 'es', 'in_reply_to_screen_name': 'archibaldanus', 'entities': {'user_mentions': [{'screen_name': 'archibaldanus', 'indices': [0, 14], 'id_str': '2764995148', 'id': 2764995148, 'name': 'Rosan Tekin'}], 'hashtags': [], 'urls': [], 'symbols': []}, 'retweet_count': 0, 'coordinates': None, 'place': None, 'contributors': None, 'text': '@archibaldanus ¡Muy bien!', 'in_reply_to_status_id_str': '544189230717882371', 'id': 544219195370897408, 'source': '<a href="http://twitter.com" rel="nofollow">Twitter Web Client</a>', 'truncated': False, 'created_at': 'Sun Dec 14 19:55:41 +0000 2014', 'id_str': '544219195370897408', 'in_reply_to_status_id': 544189230717882371, 'in_reply_to_user_id': 2764995148, 'favorite_count': 0, 'is_quote_status': False, 'in_reply_to_user_id_str': '2764995148', 'favorited': False, 'retweeted': False, 'user': {'id_str': '2785262214', 'id': 2785262214}, 'geo': None}, {'lang': 'in', 'in_reply_to_screen_name': 'jennamkp', 'entities': {'user_mentions': [{'screen_name': 'jennamkp', 'indices': [0, 9], 'id_str': '2761118578', 'id': 2761118578, 'name': 'Jenna'}], 'hashtags': [{'text': 'komm14', 'indices': [24, 31]}], 'urls': [], 'symbols': []}, 'retweet_count': 0, 'coordinates': None, 'place': None, 'contributors': None, 'text': '@jennamkp den 7 januari #komm14', 'in_reply_to_status_id_str': '544199139022876672', 'id': 544218754784460800, 'source': '<a href="http://twitter.com" rel="nofollow">Twitter Web Client</a>', 'truncated': False, 'created_at': 'Sun Dec 14 19:53:56 +0000 2014', 'id_str': '544218754784460800', 'in_reply_to_status_id': 544199139022876672, 'in_reply_to_user_id': 2761118578, 'favorite_count': 0, 'is_quote_status': False, 'in_reply_to_user_id_str': '2761118578', 'favorited': False, 'retweeted': False, 'user': {'id_str': '2785262214', 'id': 2785262214}, 'geo': None}, {'lang': 'in', 'in_reply_to_screen_name': 'jennamkp', 'entities': {'user_mentions': [{'screen_name': 'jennamkp', 'indices': [0, 9], 'id_str': '2761118578', 'id': 2761118578, 'name': 'Jenna'}, {'screen_name': 'hs_0nly', 'indices': [10, 18], 'id_str': '2833690425', 'id': 2833690425, 'name': 'HS 0nly'}], 'hashtags': [{'text': 'komm14', 'indices': [29, 36]}], 'urls': [], 'symbols': []}, 'retweet_count': 0, 'coordinates': None, 'place': None, 'contributors': None, 'text': '@jennamkp @hs_0nly 7 januari #komm14', 'in_reply_to_status_id_str': '544199769506451456', 'id': 544218528258461696, 'source': '<a href="http://twitter.com" rel="nofollow">Twitter Web Client</a>', 'truncated': False, 'created_at': 'Sun Dec 14 19:53:02 +0000 2014', 'id_str': '544218528258461696', 'in_reply_to_status_id': 544199769506451456, 'in_reply_to_user_id': 2761118578, 'favorite_count': 0, 'is_quote_status': False, 'in_reply_to_user_id_str': '2761118578', 'favorited': False, 'retweeted': False, 'user': {'id_str': '2785262214', 'id': 2785262214}, 'geo': None}, {'lang': 'tl', 'in_reply_to_screen_name': None, 'entities': {'user_mentions': [], 'hashtags': [{'text': 'komm14', 'indices': [14, 21]}], 'urls': [], 'symbols': []}, 'retweet_count': 0, 'coordinates': None, 'place': None, 'contributors': None, 'text': '@erieks3 Haha #komm14', 'in_reply_to_status_id_str': None, 'id': 543663055113314304, 'source': '<a href="http://twitter.com/download/android" rel="nofollow">Twitter for Android</a>', 'truncated': False, 'created_at': 'Sat Dec 13 07:05:47 +0000 2014', 'id_str': '543663055113314304', 'in_reply_to_status_id': None, 'in_reply_to_user_id': None, 'favorite_count': 0, 'is_quote_status': False, 'in_reply_to_user_id_str': None, 'favorited': False, 'retweeted': False, 'user': {'id_str': '2785262214', 'id': 2785262214}, 'geo': None}, {'lang': 'sv', 'in_reply_to_screen_name': 'Jnaaass', 'entities': {'user_mentions': [{'screen_name': 'Jnaaass', 'indices': [0, 8], 'id_str': '320133757', 'id': 320133757, 'name': 'Jonas Johansson'}], 'hashtags': [{'text': 'komm14', 'indices': [32, 39]}], 'urls': [], 'symbols': []}, 'retweet_count': 0, 'coordinates': None, 'place': None, 'contributors': None, 'text': '@Jnaaass Har också en bit kvar. #komm14', 'in_reply_to_status_id_str': '543383938136547328', 'id': 543662469563318272, 'source': '<a href="http://twitter.com/download/android" rel="nofollow">Twitter for Android</a>', 'truncated': False, 'created_at': 'Sat Dec 13 07:03:28 +0000 2014', 'id_str': '543662469563318272', 'in_reply_to_status_id': 543383938136547328, 'in_reply_to_user_id': 320133757, 'favorite_count': 0, 'is_quote_status': False, 'in_reply_to_user_id_str': '320133757', 'favorited': False, 'retweeted': False, 'user': {'id_str': '2785262214', 'id': 2785262214}, 'geo': None}, {'lang': 'sv', 'in_reply_to_screen_name': 'Hoppla_komm1400', 'entities': {'user_mentions': [{'screen_name': 'Hoppla_komm1400', 'indices': [0, 16], 'id_str': '2895101427', 'id': 2895101427, 'name': 'Hoppla_komm1400'}], 'hashtags': [{'text': 'komm14', 'indices': [37, 44]}], 'urls': [], 'symbols': []}, 'retweet_count': 0, 'coordinates': None, 'place': None, 'contributors': None, 'text': '@Hoppla_komm1400 Är det här en gåta? #komm14', 'in_reply_to_status_id_str': '543406906539520000', 'id': 543661392143056896, 'source': '<a href="http://twitter.com/download/android" rel="nofollow">Twitter for Android</a>', 'truncated': False, 'created_at': 'Sat Dec 13 06:59:11 +0000 2014', 'id_str': '543661392143056896', 'in_reply_to_status_id': 543406906539520000, 'in_reply_to_user_id': 2895101427, 'favorite_count': 0, 'is_quote_status': False, 'in_reply_to_user_id_str': '2895101427', 'favorited': False, 'retweeted': False, 'user': {'id_str': '2785262214', 'id': 2785262214}, 'geo': None}, {'lang': 'und', 'in_reply_to_screen_name': 'JulienAdler1', 'entities': {'user_mentions': [{'screen_name': 'JulienAdler1', 'indices': [0, 13], 'id_str': '2841269008', 'id': 2841269008, 'name': 'Julien Adler'}], 'hashtags': [{'text': 'komm14', 'indices': [17, 24]}], 'urls': [], 'symbols': []}, 'retweet_count': 0, 'coordinates': None, 'place': None, 'contributors': None, 'text': '@JulienAdler1 Ja #komm14', 'in_reply_to_status_id_str': '543475780010147840', 'id': 543659311390797824, 'source': '<a href="http://twitter.com/download/android" rel="nofollow">Twitter for Android</a>', 'truncated': False, 'created_at': 'Sat Dec 13 06:50:55 +0000 2014', 'id_str': '543659311390797824', 'in_reply_to_status_id': 543475780010147840, 'in_reply_to_user_id': 2841269008, 'favorite_count': 0, 'is_quote_status': False, 'in_reply_to_user_id_str': '2841269008', 'favorited': False, 'retweeted': False, 'user': {'id_str': '2785262214', 'id': 2785262214}, 'geo': None}, {'lang': 'sv', 'in_reply_to_screen_name': None, 'entities': {'user_mentions': [], 'hashtags': [{'text': 'komm14', 'indices': [90, 97]}], 'urls': [], 'symbols': []}, 'retweet_count': 0, 'coordinates': None, 'place': None, 'contributors': None, 'text': 'Min presentation blev uppskjuten till nästa vecka, nu har jag hela helgen på mig att öva! #komm14', 'in_reply_to_status_id_str': None, 'id': 543402365953773568, 'source': '<a href="http://twitter.com/download/android" rel="nofollow">Twitter for Android</a>', 'truncated': False, 'created_at': 'Fri Dec 12 13:49:54 +0000 2014', 'id_str': '543402365953773568', 'in_reply_to_status_id': None, 'in_reply_to_user_id': None, 'favorite_count': 0, 'is_quote_status': False, 'in_reply_to_user_id_str': None, 'favorited': False, 'retweeted': False, 'user': {'id_str': '2785262214', 'id': 2785262214}, 'geo': None}, {'lang': 'sv', 'in_reply_to_screen_name': None, 'entities': {'user_mentions': [], 'hashtags': [{'text': 'komm14', 'indices': [46, 53]}], 'urls': [], 'symbols': []}, 'retweet_count': 0, 'coordinates': None, 'place': None, 'contributors': None, 'text': 'Kommer till skolan kl 8 på morgonen, bara för #komm14', 'in_reply_to_status_id_str': None, 'id': 540056264345407488, 'source': '<a href="http://twitter.com/download/android" rel="nofollow">Twitter for Android</a>', 'truncated': False, 'created_at': 'Wed Dec 03 08:13:41 +0000 2014', 'id_str': '540056264345407488', 'in_reply_to_status_id': None, 'in_reply_to_user_id': None, 'favorite_count': 0, 'is_quote_status': False, 'in_reply_to_user_id_str': None, 'favorited': False, 'retweeted': False, 'user': {'id_str': '2785262214', 'id': 2785262214}, 'geo': None}]
                
            if response == []:
                break
                        
        except TwythonRateLimitError as err:
            print(":(")
            print(err)
            print(datetime.datetime.now())
            time.sleep(60*15+60) #In sec. 60*15 = 15 min + 1min 
            print(":)")  
        except TwythonError as err: #Handel timeouts
            print("Timeout?")
            print(err)

        for jsontw in response:
            tweets.append(jsonToTweet(userId,jsontw))
        maxId = tweets[-1].id-1
    return tweets
main()